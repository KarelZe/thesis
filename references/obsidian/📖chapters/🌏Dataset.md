

- We construct datasets that suffice (...) and serve as an input to our machine learning models. 
- Refer to chapters (...) for which algorithm requires quote data (e. g., quote rule) and which requires price data (e. g., tick test).
- Provide summary statistics, but wait until pre-processing and generation of true labels are introduced. May add pre-processing and generation of true labels in this chapter.

The following chapter describes how we construct datasets, that suffice the data requirements of classical trade classification rules and for our machine learning models. We also discuss we infer the trade initiator. 

**Data**
Testing the empirical accuracy of our approaches requires option trades where the true initiator is known. To arrive at labelled sample, we combine data from four individual data sources. Our primary source is LiveVol, which records option trades executed at US option exchanges at a transaction level. We limit our focus to option trades executed at the CBOE and ISE. LiveVol contains both trade and the corresponding quote data. Like most proprietary data sources, it does not distinguish the initiator nor does it include the involved trader types. For the CBOE and ISE exchange, the ISE Open/Close Trade Profile and CBOE Open-Close Volume Summary contains the buy and sell volumes for the option series by trader type aggregated on a daily basis. A combination of the LiveVol data set with the ISE Open/Close Trade Profile or the CBOE Open-Close Volume Summary respectively, allows us to infer the trade initiator for a subset of all trades, as we explain next. For a detailed evaluation and use in some of our machine learning models, we acquire additional underlying and option characteristics from IvyDB's OptionMetrics.

**Trade Initiator**


In the literature, researchers use different definitions of trade initiators based presumably on data availability.
As noted in cref-[[üî¢Trade Initiator]] there is no common definition for the trade initiator.

<mark style="background: #D2B3FFA6;">‚ÄúOur proprietary data provide the bid quote, the ask quote, the transaction price, the trade volume, a trader identity code, and a buy/sell indicator.5 The buy/sell indicator specifies the direction of the reporting party. If the seller re? ported the trade, then the trade would be called a sale regardless of the price at which it occurred. Thus, this indicator tells us the buyer and the seller in the trans? action, but not the trade direction per se. We can determine whether the trade was a buy or a sale by using the trader identity code in conjunctioh with the buy/sell indicator. The trader identity code is a four-letter code for every NASD member.‚Äù (Ellis et al., 2000, p. 532)</mark>

<mark style="background: #ABF7F7A6;">‚ÄúIn the literature, researchers use different definitions of trade initiators based presumably on data availability. Odders-White (2000) considers the last arriving order to be the trade initiator. She can make this determination because the TORQ database includes the NYSE audit file, which contains order-entry time for both sides of the trade. Papers such as Lee (1992) and Petersen and Fialkowski (1994) consider the active side to be market orders. Kraus and Stoll (1972) consider the active side to be the side with fewer parties. Finucane (2000) and Lee and Radhakrishna (2000) note many orders cannot be unambiguously defined as buyeror seller-initiated. Finucane (2000) finds that nearly one-fourth of all trades do not occur as the result of the arrival of a market order. In his final analysis, Finucane (2000) examines trades with at least one standard non-tick sensitive buy or sell market order in the trade. Ellis et al. (2000) and Theissen (2000) take the approach of inferring trade direction fromthe side contra to the dealer.‚Äù (Peterson and Sirri, 2003, p. 263)</mark>

<mark style="background: #FF5582A6;">ur definition of buyer- and seller-initiated trades is based on the position taken by the Makler. It has the potential advantage of being directly related to many traditional microstructure models which assume the presence of a market maker. It has, on the other hand, the drawback that only transactions involving the Makler as a buyer or a seller can be classified.</mark>

‚ÄúFor the remaining 75.4% of the sample, knowing the identity of the trader and whether he was buying or selling allows us to determine directly whether the trade was buy- or sell-initiated. These are market maker-customer or brokercustomer trades (26.2%) and market maker-broker trades (49.2%). For example, suppose that a trade is recorded as a sell by the market maker and the other party is a customer. This trade only occurs because the customer wants to trade: the market maker is the liquidity provider, and we categorize such a trade as a buyinitiated trade.7‚Äù ([Ellis et al., 2000, p. 533](zotero://select/library/items/54BPHWMV))

We base our definition of the trade initiator on the position taken by the customer. This is similar to ([[@ellisAccuracyTradeClassification2000]]533) who classify trades based on the position of the customer (...).
Similar to Ellis

In absence 

**Sample Construction**

Our sample construction follows ([[@grauerOptionTradeClassification2022]]7--9), fostering comparability between both works. We acquire transaction-level options trade data for all major US exchanges from LiveVol. The dataset is tabular, and each record is time-stamped to the second. For each transaction, the executing exchange, trade price, trade volume, quotes and quote sizes for the exchanges where the option is quoted, as well as the GLS-NBO and GLS-NBB are recorded. This is sufficient to estimate the quote rule, depth rule, and trade size rule. In addition, for tick-based algorithms, we add the previous and subsequent distinct trade prices. We are able to uniquely identify the traded option series from a distinct key consisting of the underlying, the expiration date, option type and strike price. We restrict our analysis to trades to transactions at the ISE and CBOE. Following a standard procedure in literature, we filter out option trades with a trade price equal or less than zero and eliminate trades with a negative or zero trade volume as well as large trades with a trade volume exceeding 10,000,000 contracts. We further remove cancelled or duplicated trades and eliminate entries with multiple underlying symbols for the same root. 

The Open/Close datasets for the ISE and CBOE contain the daily buy and sell volumes for the option series by trader type, the trade volume and whether a position was closed or opened. Four trader types are available: customer, professional customer, broker/dealer, and firm proprietary. ¬ªCustomer¬´ orders are placed by a retail trader or a member of the exchange on behalf of the customer. ¬ªProfessional customer¬´ are merely distinguished from the former by a high trading activity ($\geq390$ orders per day over one month period). Likewise, trades by a member on their own account can be ¬ªproprietary¬´, if executed for their account or ¬ªbroker/dealer¬´ if executed for non-members of the exchange ([[@nasdaqinc.FrequentlyAskedQuestions2017]]2). Trade volumes for customers and professional customers are further detailed into small-sized trades ($\leq 100$ contracts), medium-sized trades ($101-199$ contracts), and large trades. As well as, if an existing position was closed or new position is opened. We first sum buy and sell orders of all trader types to obtain the daily trading volume at the ISE or CBOE per option series and day. Similarly, we calculate the aggregate volumes of customer buy and sell orders identified by the account type ¬ªcustomer¬´. Despite similarities, we do not consider professional customers as customers, as the trader type became only available mid-sample.

To infer the true label, we exploit the fact, that if there were only customer buy or sell orders, hence the customer buy or sell volume equals the daily trading volume, we can confidently sign all transactions for the option series at the specific date and exchange as either buyer- or seller-initiated. The applicability of our labelling approach is limited by the  existence of non-customer or simultaneous customer buy and sell trades. The so-obtained trade initiator is merged with the LiveVol trades of the exchange based on a unique key consisting of the trade date, expiration date, root symbol of the underlying, option type, and strike price.

For the ISE, our matched sample spans from 2 May 2005 to 31 May 2017 and consists of 49,203,747 trades. The period covers the full history of ISE open/close data up to the last date the dataset was available to us.  Our matched CBOE sample consists of 37,155,412 trades between 1 January 2011 and 31 October 2017. The sample period is governed by a paradigm shift in the construction of the CBOE open/close dataset and our most recent trades in LiveVol. Following our initial reasoning to employ semi-supervised methods, we reserve unlabelled customer trades between 24 October 2012 and 24 October 2013 at the ISE for pre-training. We provide further details in cref-[[üë®‚Äçüç≥Tain-Test-split]].

While our procedure makes the inference of the true trade initiator partly feasible, providing us with a labelled data set, concerns regarding a selection bias due to the excessive filtering have to be raised. We acknowledge these concerns as part of our exploratory data analysis in cref-[[üöèExploratory Data Analysis]], in which we compare unmerged and merged sub-samples.

**Notes:**
[[üåèDataset notes]]