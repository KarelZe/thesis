\section{Introduction}\label{sec:introduction}

Every option trade has a buyer and seller side. For a plethora of problems in option research, itâ€™s also crucial to determine the party that initiated the transaction. Common applications include the study of option demand \autocite[\checkmark][4261]{garleanuDemandBasedOptionPricing2009}, of informational content in option trading \autocites[\checkmark][631]{huDoesOptionTrading2014}[\checkmark][882]{panInformationOptionVolume2006}[\checkmark][1079]{caoInformationalContentOption2005}, of order flow \autocite[\checkmark][684]{muravyevOrderFlowExpected2016}, or trading costs \autocite[\checkmark][4980]{muravyevOptionsTradingCosts2020}. 

Despite the clear importance for empirical research, the true initiator of the trade is frequently missing in option data sets and must be inferred using trade classification rules \autocite[\checkmark][453]{easleyOptionVolumeStock1998}. In consequence, the correctness of empirical studies hinges on the algorithm's ability to accurately identify the trade initiator.

Among the most prevailing variants to sign trades are the tick test \autocite[\checkmark][240]{hasbrouckTradesQuotesInventories1988}, quote rule \autocite[\checkmark][41]{harrisDayEndTransactionPrice1989}, and hybrids thereof such as the \gls{LR} algorithm \autocite[\checkmark][745]{leeInferringTradeDirection1991}, the \gls{EMO} algorithm \autocite[\checkmark][536]{ellisAccuracyTradeClassification2000}, and the \gls{CLNV} method \autocite[\checkmark][3812]{chakrabartyTradeClassificationAlgorithms2007}, that infer the trade initiator from adjacent prices and quotes. These heuristics have initially been proposed and tested in the stock market.

For option markets, the works of \textcites[\checkmark][11--13]{grauerOptionTradeClassification2022}[\checkmark][887--891]{savickasInferringDirectionOption2003} raise concerns about the transferability of standard trade signing rules due to deteriorating classification accuracies and systematic misclassifications. The latter is unsettling, as non-random misclassifications ultimately bias the dependent research \autocites[\checkmark][260]{odders-whiteOccurrenceConsequencesInaccurate2000}[\checkmark][157]{theissenTestAccuracyLee2001}.

\todo{Ninja tip problemsolution, problem, solution}
\todo{it has not shown the same results in y area , Eveidencen shows that htis intervention helps, xxx, but the solution has too many side effects}

Recent work of \textcite[\checkmark][13--16]{grauerOptionTradeClassification2022} made significant progress by proposing explicit overrides for trade types and by combining multiple heuristics, thereby advancing the state-of-the-art performance in option trade classification. By this means, their approach enforces a more sophisticated decision boundary eventually leading to a more accurate classification. Beyond heuristics, however, it remains open, if classifiers \emph{learned} on trade data can improve upon \emph{static} classification rules in terms of performance and robustness.

Our work fills this gap by focusing on machine learning methods to infer the trade initiator in the option market. Approaching trade classification with machine learning is a logical choice, given its capability to handle high-dimensional trade data and learn complex decision boundaries. This raises the question, \emph{can an alternative machine learning-based classifier improve upon the accuracy of state-of-the-art approaches for option trade classification?}

To answer this question, we model trade classification through machine learning. We consider the supervised case, where fully-labeled trade data is available, as well as the semi-supervised setting, where trades are partially labeled with the true trade initiator. Our work makes the following contributions:
\begin{enumerate}[label=(\roman*),noitemsep]
    \item We employ state-of-the-art supervised algorithms i.~e., gradient-boosted trees and Transformer networks to the problem of trade classification and benchmark these approaches against rules-based methods. Our approaches outperform all rule-based approaches on \gls{ISE} and \gls{CBOE} data with comparable data requirements. In the application setting, our approaches approximate the true effective spread best.
    \item In a real-world setting, labeled trades are typically scarce, while unlabeled trades are abundant. Motivated by this consideration, we extend the classifiers to learn on both labeled and unlabeled instances through pre-training and self-training procedures. We analyze the effect on classification accuracy and observe that pre-training of Transformers further alleviates accuracy on \gls{ISE} trades.
    \item Through a game-theoretic approach, our work is the first to consistently attribute the performance of rule-based and machine learning-based classification to individual features. We discover that both paradigms share common features, but machine learning-based classifiers attain higher performance gains and effectively exploit the data. By probing and visualizing the attention mechanism in the Transformer, we can strengthen the connection to rule-based classification and reveal that \emph{learned} rules mimic classical rules.
\end{enumerate}

The remainder of this thesis is organized as follows. \cref{sec:related-work} reviews publications on trade classification in option markets and using machine learning, thereby underpinning our research framework. \cref{sec:rule-based-approaches} introduces extant methods for rule-based trade classification. \cref{sec:supervised-approaches} discusses and introduces supervised methods for trade classification. Then, \cref{sec:semi-supervised-approaches} extends the previously selected algorithms for the semi-supervised case. We test the models in \cref{sec:empirical-study} in an empirical setting. In \cref{sec:application} we apply our models to the problem of effective spread estimation. Finally, \cref{sec:discussion} discusses limitations, and \cref{sec:conclusion} concludes.
